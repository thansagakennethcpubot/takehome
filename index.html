<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Take Home Assignment</title>
<style>
  :root{
    --bg:#0a0c1b;--panel:#141a2f;--accent:#3b82f6;--accent2:#8b5cf6;
    --good:#22c55e;--bad:#ef4444;--text:#e5e7eb;--muted:#94a3b8;--ok:#facc15;
  }
  *{box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
  body{margin:0;background:linear-gradient(160deg,var(--panel),#0f172a);color:var(--text);
       display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:30px;}
  h1{color:var(--accent);margin-bottom:10px;text-align:center;}
  .app{max-width:700px;width:100%;background:rgba(255,255,255,0.04);padding:24px;border-radius:16px;
       box-shadow:0 8px 20px rgba(0,0,0,0.3);}
  .progress-section{text-align:center;margin-top:10px;}
  .progress-text{color:var(--muted);font-size:0.9rem;margin-bottom:4px;}
  .progress-container{width:100%;background:rgba(255,255,255,0.1);border-radius:10px;height:10px;overflow:hidden;}
  .progress-bar{height:10px;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width 0.4s ease;}
  .question{font-weight:700;font-size:1.2rem;margin:16px 0;}
  .choices{display:flex;gap:10px;margin-top:8px;}
  .btn{flex:1;padding:12px;border:none;border-radius:10px;font-weight:700;cursor:pointer;
       background:var(--panel);color:var(--text);transition:all 0.2s;}
  .btn:hover{background:var(--accent);color:#fff;transform:translateY(-2px);}
  .primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;}
  .feedback{margin-top:14px;min-height:24px;font-weight:600;}
  .correct{color:var(--good);}
  .wrong{color:var(--bad);}
  .footer{text-align:center;margin-top:20px;color:var(--muted);}
  .admin-panel,.login-panel{margin-top:24px;background:rgba(255,255,255,0.03);padding:16px;border-radius:12px;}
  input,textarea,select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);
       background:rgba(255,255,255,0.05);color:var(--text);}
  .row{display:flex;gap:8px;align-items:center;margin-top:8px;}
  .small-btn{background:rgba(255,255,255,0.1);border:none;padding:6px 10px;border-radius:8px;color:var(--text);cursor:pointer;}
  .small-btn:hover{background:var(--accent);}
  table{width:100%;margin-top:10px;border-collapse:collapse;}
  th,td{padding:6px 8px;border-bottom:1px solid rgba(255,255,255,0.1);font-size:14px;text-align:left;}
  th{color:var(--muted);}
  .toggle{margin-top:20px;text-align:center;}
  .hidden{display:none;}
  #summary{display:none;text-align:center;margin-top:20px;}
  #summary h2{color:var(--accent);}
  #summary p{color:var(--muted);}
  #rating{font-size:1.1rem;margin-top:8px;font-weight:bold;}
  .excellent{color:var(--good);}
  .good{color:var(--ok);}
  .tryagain{color:var(--bad);}
  .fade-in{animation:fadeIn 0.6s ease-in;}
  @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);opacity:1;}}
</style>
</head>
<body>
  <div class="app">
    <h1>Take Home Assignment</h1>
    <p class="muted" style="text-align:center;">Answer true or false, and learn why.</p>

    <div id="namePrompt">
      <h3 style="text-align:center;">Enter your name to begin:</h3>
      <input id="userName" placeholder="Your full name">
      <button id="startBtn" class="btn primary" style="margin-top:10px;width:100%;">Start Quiz</button>
    </div>

    <div class="progress-section hidden" id="progressSection">
      <div id="progressText" class="progress-text"></div>
      <div class="progress-container">
        <div id="progressBar" class="progress-bar"></div>
      </div>
    </div>

    <div id="quizArea" class="hidden">
      <div id="question" class="question"></div>
      <div class="choices">
        <button id="btnTrue" class="btn">True</button>
        <button id="btnFalse" class="btn">False</button>
      </div>
      <div id="feedback" class="feedback"></div>
      <div class="toggle">
        <button id="nextBtn" class="btn primary" style="display:none">Next ➜</button>
      </div>
    </div>

    <div id="summary" class="fade-in">
      <h2>Quiz Complete 🎉</h2>
      <p id="scoreText"></p>
      <div id="rating"></div>
      <p id="saveStatus"></p>
      <button id="restartBtn" class="btn primary" style="margin-top:15px;">Restart Quiz</button>
    </div>

    <div class="footer">Data saved automatically to admin Google Sheet</div>
  </div>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbyzu9nMykAjUGAfmPMxKNdy1mCjydSnz-Zq-DisPwcvOW2Fpqm5H-b-P8on3vNMpwWf/exec";

const DEFAULTS = [
  {q:"A celebrity’s photo with a shocking caption is always true if many people share it.",a:false,e:"Virality doesn’t equal truth. Photos and captions can be edited or taken out of context."},
  {q:"If an image has inconsistent lighting, it may be edited.",a:true,e:"Lighting mismatches often indicate manipulation."},
  {q:"Headlines in ALL CAPS are more trustworthy.",a:false,e:"ALL CAPS is often used for clickbait, not credibility."},
  {q:"You should always check the source of information before believing or sharing it.",a:true,e:"Reliable information comes from verified and credible sources."},
  {q:"If a post has many likes and comments, it must be accurate.",a:false,e:"Popularity doesn’t equal accuracy. Many viral posts spread misinformation."},
  {q:"Fact-checking websites like Snopes or AFP Fact Check can help verify viral stories.",a:true,e:"Fact-checking sites are valuable tools for spotting misinformation."},
  {q:"Deepfake videos are impossible to detect.",a:false,e:"Deepfakes can often be detected by analyzing unnatural movements, lighting, and metadata."},
  {q:"It’s okay to share an article without reading it if the title sounds true.",a:false,e:"Headlines can be misleading — always read before sharing."},
  {q:"Critical thinking helps protect you from fake news.",a:true,e:"Asking questions and evaluating evidence helps separate facts from fiction."},
  {q:"Images and videos on social media are always genuine evidence.",a:false,e:"Visual content can be staged, edited, or taken out of context."}
];

let questions = [...DEFAULTS];
let idx = 0, score = 0;
let userName = "", userAnswers = [];

const qEl = document.getElementById('question');
const feedback = document.getElementById('feedback');
const btnT = document.getElementById('btnTrue');
const btnF = document.getElementById('btnFalse');
const nextBtn = document.getElementById('nextBtn');
const summary = document.getElementById('summary');
const scoreText = document.getElementById('scoreText');
const ratingEl = document.getElementById('rating');
const restartBtn = document.getElementById('restartBtn');
const quizArea = document.getElementById('quizArea');
const progressBar = document.getElementById('progressBar');
const progressText = document.getElementById('progressText');
const namePrompt = document.getElementById('namePrompt');
const progressSection = document.getElementById('progressSection');
const saveStatus = document.getElementById('saveStatus');
const startBtn = document.getElementById('startBtn');

startBtn.onclick = () => {
  userName = document.getElementById('userName').value.trim();
  if(!userName) return alert("Please enter your name first.");
  namePrompt.classList.add('hidden');
  quizArea.classList.remove('hidden');
  progressSection.classList.remove('hidden');
  renderQuestion();
};

function renderQuestion(){
  const q = questions[idx];
  qEl.textContent = (idx+1) + ". " + q.q;
  feedback.textContent = "";
  btnT.disabled = btnF.disabled = false;
  nextBtn.style.display = "none";
  updateProgress();
}

function updateProgress(){
  const percent = ((idx)/questions.length)*100;
  progressBar.style.width = percent + "%";
  progressText.textContent = `Question ${idx+1} of ${questions.length}`;
}

function answer(isTrue){
  const q = questions[idx];
  const correct = q.a === isTrue;
  userAnswers.push({question:q.q, answer:isTrue, correct});
  btnT.disabled = btnF.disabled = true;
  feedback.textContent = (correct?"✅ Correct — ":"❌ Wrong — ") + q.e;
  feedback.className = "feedback " + (correct?"correct":"wrong");
  nextBtn.style.display = "inline-block";
  if(correct) score++;
}

function next(){
  idx++;
  if(idx>=questions.length){
    progressBar.style.width = "100%";
    showSummary();
  }else renderQuestion();
}

function showSummary(){
  quizArea.style.display = "none";
  summary.style.display = "block";
  const percent = Math.round((score/questions.length)*100);
  scoreText.textContent = `${userName}, you scored ${score} out of ${questions.length} (${percent}%)`;
  let rating="";
  if(percent>=80){rating="Excellent work! 🌟";ratingEl.className="excellent";}
  else if(percent>=50){rating="Good effort! 👍";ratingEl.className="good";}
  else{rating="Try again — you’ll get it! 💪";ratingEl.className="tryagain";}
  ratingEl.textContent = rating;
  progressText.textContent = "Quiz Completed 🎉";

  // Send results to Google Sheet
  fetch(SHEET_URL, {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      name: userName,
      score: score,
      total: questions.length,
      percent: percent,
      answers: userAnswers
    })
  })
  .then(res => res.json())
  .then(d => saveStatus.textContent = "✅ Result saved to Google Sheet")
  .catch(err => {
    console.error(err);
    saveStatus.textContent = "⚠️ Could not save result. Please check your connection.";
  });
}

function restartQuiz(){
  idx=0;score=0;userAnswers=[];
  summary.style.display="none";
  quizArea.style.display="block";
  renderQuestion();
}

btnT.onclick=()=>answer(true);
btnF.onclick=()=>answer(false);
nextBtn.onclick=next;
restartBtn.onclick=restartQuiz;
</script>
</body>
</html>
