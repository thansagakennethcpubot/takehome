<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'; img-src 'self' data:;">
  <title>Neon Media Literacy Quiz — Admin + Player</title>

  <style>
    :root {
      --bg:#050816; --panel:#07122a; --card:#0b1530; --accent1:#38bdf8; --accent2:#8b5cf6;
      --glow:rgba(56,189,248,0.15); --good:#22c55e; --bad:#ef4444; --muted:#9fb0c8; --text:#e6eef6;
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(600px 300px at 10% 10%, rgba(124,58,237,0.06), transparent),radial-gradient(800px 400px at 90% 90%, rgba(56,189,248,0.04), transparent),var(--bg);font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,Arial;color:var(--text);min-height:100vh;padding:28px;display:flex;align-items:flex-start;justify-content:center}
    .app{width:100%;max-width:1100px}
    .header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:18px}
    .brand h1{margin:0;color:var(--accent1);letter-spacing:0.6px}
    .brand p{margin:0;color:var(--muted);font-size:13px}
    .controls{display:flex;gap:8px}
    .btn{background:linear-gradient(90deg,var(--card),var(--panel));border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:10px;color:var(--accent1);cursor:pointer;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041025;border:none;box-shadow:0 6px 18px rgba(59,130,246,0.12)}
    .layout{display:grid;grid-template-columns:1fr 420px;gap:18px}
    @media(max-width:980px){.layout{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:16px;border:1px solid rgba(255,255,255,0.02);box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    .question{font-size:1.1rem;font-weight:800;margin:16px 0}
    .choices{display:flex;gap:12px}
    .choice{flex:1;padding:12px;border-radius:10px;border:2px solid rgba(255,255,255,0.03);background:transparent;color:#fff;font-weight:800;cursor:pointer;transition:all .2s}
    .choice:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(56,189,248,0.06)}
    .choice.correct{background:linear-gradient(90deg,var(--good),#10b981)}
    .choice.wrong{background:linear-gradient(90deg,var(--bad),#fb7185)}
    .footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="brand">
        <h1>Neon Media Literacy Quiz</h1>
        <p>Spot misinformation. Train your instincts. Look cool doing it.</p>
      </div>
      <div class="controls">
        <button class="btn" id="openAdminBtn">Admin</button>
        <button class="btn primary" id="downloadBtn">Download Data</button>
        <button class="btn" id="clearAllBtn">Clear All</button>
      </div>
    </div>

    <main class="card">
      <div id="startScreen">
        <label class="small muted">Enter your name to start</label>
        <div style="display:flex;gap:8px;margin-top:8px">
          <input id="playerName" class="input" placeholder="Your name" />
          <button class="btn primary" id="startBtn">Start</button>
        </div>
      </div>

      <div id="quizArea" style="display:none">
        <div class="question" id="question">Loading...</div>
        <div class="choices">
          <button class="choice" id="btnTrue">True</button>
          <button class="choice" id="btnFalse">False</button>
        </div>
        <div id="feedback"></div>
        <div style="margin-top:12px;text-align:right">
          <button class="btn" id="nextBtn" style="display:none">Next ➜</button>
        </div>
      </div>

      <div id="endArea" style="display:none;text-align:center">
        <h3 id="finalText"></h3>
        <button class="btn primary" id="restartBtn">Restart</button>
      </div>

      <div class="footer">Neon Edition • Data saved locally</div>
    </main>
  </div>

  <script type="module">
    // Everything wrapped to avoid global leaks
    const QKEY = 'neon_quiz_questions_v1';
    const SKEY = 'neon_quiz_submissions_v1';

    const DEFAULT_Q = [
      {q:"A celebrity’s photo with a shocking caption is always true if many people share it.",a:false,e:"Virality ≠ truth; photos can be altered."},
      {q:"If an image has inconsistent lighting, it may be edited.",a:true,e:"Visual inconsistencies often indicate manipulation."}
    ];

    const startBtn = document.getElementById('startBtn');
    const playerNameInput = document.getElementById('playerName');
    const quizArea = document.getElementById('quizArea');
    const startScreen = document.getElementById('startScreen');
    const questionEl = document.getElementById('question');
    const btnTrue = document.getElementById('btnTrue');
    const btnFalse = document.getElementById('btnFalse');
    const feedback = document.getElementById('feedback');
    const nextBtn = document.getElementById('nextBtn');
    const endArea = document.getElementById('endArea');
    const finalText = document.getElementById('finalText');
    const restartBtn = document.getElementById('restartBtn');

    let idx=0, score=0, questions=[...DEFAULT_Q];

    function startQuiz() {
      const name = playerNameInput.value.trim();
      if(!name) return alert('Enter your name first!');
      startScreen.style.display='none';
      quizArea.style.display='block';
      idx=0; score=0;
      loadQuestion();
    }

    function loadQuestion(){
      const q = questions[idx];
      questionEl.textContent = `${idx+1}. ${q.q}`;
      feedback.textContent = '';
      btnTrue.disabled = btnFalse.disabled = false;
      nextBtn.style.display='none';
    }

    function handleAnswer(isTrue){
      const q = questions[idx];
      const correct = q.a===isTrue;
      btnTrue.disabled = btnFalse.disabled = true;
      feedback.textContent = correct ? `✅ Correct — ${q.e}` : `❌ Wrong — ${q.e}`;
      feedback.style.color = correct ? 'limegreen' : 'tomato';
      if(correct) score++;
      nextBtn.style.display='inline-block';
    }

    function nextQuestion(){
      idx++;
      if(idx < questions.length) loadQuestion();
      else finishQuiz();
    }

    function finishQuiz(){
      quizArea.style.display='none';
      endArea.style.display='block';
      finalText.textContent = `You scored ${score}/${questions.length}`;
      localStorage.setItem(SKEY, JSON.stringify({score, when:new Date().toISOString()}));
    }

    function restart(){
      endArea.style.display='none';
      startScreen.style.display='block';
      playerNameInput.value='';
    }

    startBtn.addEventListener('click', startQuiz);
    btnTrue.addEventListener('click', ()=>handleAnswer(true));
    btnFalse.addEventListener('click', ()=>handleAnswer(false));
    nextBtn.addEventListener('click', nextQuestion);
    restartBtn.addEventListener('click', restart);
  </script>
</body>
</html>
